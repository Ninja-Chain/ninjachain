# Ninja Chain

## 登録・ログインからパスワード参照までの流れ

<img src="file:///image.png"  title="シーケンス図">

### 登録・ログイン
1. ログインしたいユーザがマスターパスワードと登録するメールアドレスをChrome拡張機能に渡す
2. 拡張機能内で、マスターパスワードとメールアドレスをまとめてハッシュ化して、アカウント固有のシード(秘密鍵)を作成する
3. アカウント登録時にはこのシード(秘密鍵)のアカウントをNinjaChain上に作成、アカウント認証時にはこのシード(秘密鍵)がNinjaChain上に既に存在するかを確認する

### 各サイトのパスワード登録
4. パスワードを登録したいサイトのドメインとアカウントのシード(秘密鍵)をまとめてハッシュ化し、登録したいパスワードのキーを作成する
5. 登録したいパスワードを、シードを共通鍵として暗号化し、暗号化済みパスワードを作成する
6. NinajaChainに対して、アカウントの公開鍵にkeyを紐付け、keyに対するバリューとして暗号化済みパスワードを書き込む

### 各サイトのパスワード参照
7. 参照したいパスワードのサイトとアカウントのシードを用いて参照するためのキーを再生成し、NinjaChainにシードに対応する公開鍵に紐づく、さらにそのキーに対応する値を参照する
8. キーに対応した暗号化されたパスワードが拡張機能内に返ってくる
9. シードを共通鍵として、暗号化されたパスワードを復号化し、参照したいパスワードがわかる
10. ユーザーがそのパスワードを用いてサイトにログインが可能となる
